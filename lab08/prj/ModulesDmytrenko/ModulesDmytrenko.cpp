#include <iostream>
#include <cmath>
#include <cstdio>
#include <fstream>
#include <sstream>
#include <string>
#include <algorithm>
#include <cctype>
#include <vector>
#include <ctime> // потрібна для роботи з time, ctime, localtime, asctime


double s_calculation(double x, double y, double z)
{
    double S;
    if (y == z || ((z + x) * y) == 0 || (2 * y + M_PI) == 0) {
        std::cout << "Помилка: Дiлення на нуль!" << std::endl;
    return NAN;
    }
    double resulte = 1 + sqrt(pow((x / abs(y - z)), 3) + ((pow(x, 2) + z) / sqrt(abs((z + x) * y))) - cos(x * pow(z, 2)) / (2 * y + M_PI));
    return resulte;
}

int calculate_bonuses(float sum_purchase) {
    if (sum_purchase >= 100 && sum_purchase < 200)
    return 1;
    if (sum_purchase >= 200 && sum_purchase < 500)
    return 5;
    if (sum_purchase >= 500 && sum_purchase < 1000)
    return 10;
    if (sum_purchase >= 1000 && sum_purchase < 2500)
    return 50;
    if (sum_purchase >= 2500 && sum_purchase < 5000)
    return 150;
    if (sum_purchase >= 5000)
    return 300;
}

float purchase_to_pay(float sum_purchase, int bonus) {
    float discount = bonus * 0.25;
    float price = sum_purchase - discount;
    return price;
}


float degrees(float fahr_degree)
{
    float c_degree = (5.0/9.0) * (fahr_degree - 32);
    return c_degree;
}

int count_bits(unsigned int N) {
    unsigned int mask = 1 << 4;
    bool D4 = (N & mask) != 0;

    int count0 = 0, count1 = 0;
    unsigned int temp = N;

    while (temp > 0) {
        (temp & 1) ? count1++ : count0++;
        temp >>= 1;
    }

    return (D4 == 0) ? count0 : count1;
}


void writeAuthorInfo(const std::string& filename)
{
    std::ofstream outFile(filename);
    if (outFile.is_open()) {
        outFile << "Розробник: © Дмитренко Я. А.\n";
        outFile << "Назва ЗВО: ЦНТУ\n";
        outFile << "Місто, країна: Україна м.Кропивницький\n";
        outFile << "Рік розробки: 2025 рік\n";
        outFile.close();
    } else {
        std::cerr << "Не вдалося відкрити файл для запису.\n";
    }
}

// Перевірка символу на кирилицю
bool isCyrillic(char c)
{
    unsigned char uc = static_cast<unsigned char>(c);
    return (uc >= 0xD0 && uc <= 0xD3); // Часткове покриття UTF-8 кирилиці
}

// Визначення мови
std::string detectLanguage(const std::string& text)
{
    int cyrillicCount = 0, latinCount = 0;
    for (char c : text) {
        if (std::isalpha(static_cast<unsigned char>(c))) {
            if (isCyrillic(c)) cyrillicCount++;
            else latinCount++;
        }
    }
    if (cyrillicCount > latinCount)
        return "Українська";
    else if (latinCount > cyrillicCount)
        return "English";
    else
        return "Невідома мова";
}

// Перетворення тексту на великі літери
std::string toUpperCase(const std::string& str)
{
    std::string result = str;
    std::transform(result.begin(), result.end(), result.begin(),
                   [](unsigned char c){ return std::toupper(c); });
    return result;
}

// Видалення заборонених слів з українського тексту
std::string removeForbiddenWords(const std::string& text, const std::vector<std::string>& forbidden)
{
    std::istringstream iss(text);
    std::ostringstream oss;
    std::string word;
    while (iss >> word) {
        std::string lowerWord = word;
        std::transform(lowerWord.begin(), lowerWord.end(), lowerWord.begin(),
                       [](unsigned char c){ return std::tolower(c); });

        bool isForbidden = false;
        for (const std::string& bad : forbidden) {
            if (lowerWord.find(bad) != std::string::npos) {
                isForbidden = true;
                break;
            }
        }

        if (!isForbidden) oss << word << " ";
    }
    return oss.str();
}

std::string educationArtecl()
{
   std::string artecl = "\t\t\t\t\t\tПро вищу освiту Стаття 62.\n"
    "\t\t\t\tПрава осiб, якi навчаються у закладах вищої освiти\n"
    "1. Осiби, якi навчаються у закладах вищої освiти, мають право на:\n"
    "1) вибiр форми навчання пiд час вступу до закладу вищої освiти;\n"
    "2) безпечнi i нешкiдливi умови навчання, працi та побуту;\n"
    "3) трудову дiяльнiсть у позанавчальний час;\n"
    "4) додаткову оплачувану вiдпустку у зв’язку з навчанням за основним мiсцем роботи, скорочений робочий час та iншi пiльги, передбаченi законодавством для осiб, якi поєднують роботу з навчанням;\n"
    "5) безоплатне користування бiблiотеками, iнформацiйними фондами, навчальною, науковою та спортивною базами закладу вищої освiти;\n"
    "6) безоплатне забезпечення iнформацiєю для навчання у доступних форматах з використанням технологiй, що враховують обмеження життєдiяльностi, зумовленi станом здоров’я (для осiб з особливими освiтнiми потребами);\n"
    "7) користування виробничою, культурно-освiтньою, побутовою, оздоровчою базами закладу вищої освiти у порядку, передбаченому статутом закладу вищої освiти;\n"
    "8) забезпечення гуртожитком та цiлодобовим доступом до нього на строк навчання у порядку, встановленому законодавством;\n"
    "9) участь у науково-дослiдних, дослiдно-конструкторських роботах, конференцiях, симпозiумах, виставках, конкурсах, представлення своїх робiт для публiкацiї;\n"
    "10) участь у заходах з освiтньої, наукової, науково-дослiдної, спортивної, мистецької, громадської дiяльностi, що проводяться в Українi та за кордоном, у встановленому законодавством порядку;\n"
    "11) участь в обговореннi та вирiшеннi питань удосконалення навчального процесу, науково-дослiдної роботи, призначення стипендiй, органiзацiї дозвiлля, побуту, оздоровлення;\n"
    "12) внесення пропозицiй щодо умов i розмiру плати за навчання;\n"
    "13) участь у громадських об’єднаннях;\n"
    "14) участь у дiяльностi органiв громадського самоврядування закладу вищої освiти, iнститутiв, факультетiв, вiддiлень, вченої ради закладу вищої освiти, органiв студентського самоврядування;\n"
    "15) вибiр навчальних дисциплiн у межах, передбачених вiдповiдною освiтньою програмою та навчальним планом, в обсязi, що становить не менш як 25 вiдсоткiв загальної кiлькостi кредитiв ЄКТС, передбачених для даного рiвня вищої освiти. При цьому здобувачi певного рiвня вищої освiти мають право вибирати навчальнi дисциплiни, що пропонуються для iнших рiвнiв вищої освiти, за погодженням з керiвником вiдповiдного факультету чи пiдроздiлу;\n"
    "16) навчання одночасно за декiлькома освiтнiми програмами, а також у декiлькох закладах вищої освiти, за умови отримання тiльки однiєї вищої освiти за кожним ступенем за кошти державного (мiсцевого) бюджету;\n"
    "17) академiчну мобiльнiсть, у тому числi мiжнародну;\n"
    "18) отримання соцiальної допомоги у випадках, встановлених законодавством;\n"
    "19) зарахування до страхового стажу вiдповiдно до Закону України \"Про загальнообов’язкове державне пенсiйне страхування\" перiодiв навчання на деннiй формi навчання у закладах вищої освiти, аспiрантурi, докторантурi, iнтернатурi, резидентурi, за умови добровiльної сплати страхових внескiв;\n"
    "20) академiчну вiдпустку або перерву в навчаннi iз збереженням окремих прав здобувача вищої освiти, а також на поновлення навчання у порядку, встановленому центральним органом виконавчої влади у сферi освiти i науки;\n"
    "21) участь у формуваннi iндивiдуального навчального плану;\n"
    "22) моральне та/або матерiальне заохочення за успiхи у навчаннi, науково-дослiднiй i громадськiй роботi, за мистецькi та спортивнi досягнення тощо;\n"
    "23) захист вiд будь-яких форм експлуатацiї, фiзичного та психiчного насильства;\n"
    "24) безоплатне проходження практики на пiдприємствах, в установах, закладах та органiзацiях, а також на оплату працi пiд час виконання виробничих функцiй згiдно iз законодавством;\n"
    "25) канiкулярну вiдпустку тривалiстю не менш як вiсiм календарних тижнiв на навчальний рiк;\n"
    "26) отримання цiльових пiльгових державних кредитiв для здобуття вищої освiти у порядку, визначеному Кабiнетом Мiнiстрiв України;\n"
    "27) оскарження дiй органiв управлiння закладу вищої освiти та їх посадових осiб, педагогiчних i науково-педагогiчних працiвникiв;\n"
    "28) спецiальний навчально-реабiлiтацiйний супровiд та вiльний доступ до iнфраструктури закладу вищої освiти вiдповiдно до медико-соцiальних показань за наявностi обмежень життєдiяльностi, зумовлених станом здоров’я.\n"
    "2. Осiби, якi навчаються у закладах вищої освiти за денною формою навчання за рахунок коштiв державного або мiсцевих бюджетiв, мають право на отримання академiчних та соцiальних стипендiй у встановленому законодавством порядку.\n"
    "3. Осiби, якi навчаються у закладах вищої освiти за денною формою навчання, можуть отримувати iншi стипендiї, призначенi фiзичними (юридичними) особами.\n"
    "4. Соцiальнi стипендiї призначаються студентам (курсантам) закладу вищої освiти в порядку, встановленому Кабiнетом Мiнiстрiв України.\n"
    "Студенти (курсанти) закладу вищої освiти з числа дiтей-сирiт та дiтей, позбавлених батькiвського пiклування, а також студенти (курсанти) закладу вищої освiти, якi в перiод навчання у вiцi вiд 18 до 23 рокiв залишилися без батькiв, мають гарантоване право на отримання соцiальної стипендiї, у тому числi у разi отримання академiчної стипендiї.\n"
    "Академiчнi стипендiї призначаються особам, якi досягли значних успiхiв у навчаннi та/або науковiй дiяльностi згiдно з критерiями, встановленими Кабiнетом Мiнiстрiв України. Частка студентiв (курсантiв), якi мають право на отримання академiчних стипендiй, встановлюється вченою радою закладу вищої освiти у межах визначеного Кабiнетом Мiнiстрiв України загального вiдсотка студентiв (курсантiв), якi мають право на отримання академiчних стипендiй, та стипендiального фонду.\n"
    "Студентам (курсантам) закладiв вищої освiти, якi мають право на отримання соцiальної стипендiї i набувають право на отримання академiчної стипендiї, надається один вид стипендiї за їхнiм вибором.\n"
    "5. Розмiр академiчної та соцiальної стипендiй, порядок їх призначення i виплати встановлюються Кабiнетом Мiнiстрiв України.\n"
    "6. Для студентiв (курсантiв), якi навчаються за гостродефiцитними спецiальностями (спецiалiзацiями) (у галузях знань освiта, математичнi, природничi, технiчнi науки), встановлюється пiдвищений розмiр академiчної стипендiї. Перелiк таких спецiальностей (спецiалiзацiй) та розмiр пiдвищення визначаються Кабiнетом Мiнiстрiв України.\n"
    "9. Здобувачi вищої освiти, якi навчаються у закладах вищої освiти за денною формою навчання, мають право на пiльговий проїзд у транспортi у порядку, встановленому Кабiнетом Мiнiстрiв України.\n"
    "10. Студенти, курсанти закладiв вищої освiти мають право на отримання студентського квитка, зразок якого затверджується центральним органом виконавчої влади у сферi освiти i науки.";
    return artecl;
}

void appendEducationArticleToInput(const std::string& filename) {
    std::ofstream file(filename, std::ios::app);
    if (file.is_open()) {
        file << "\n" << educationArtecl() << std::endl;
        file.close();
    } else {
        std::cerr << "Не вдалося відкрити " << filename << " для дозапису статті.\n";
    }
}

void appendCurrentDateTime(const std::string& filename)
{
    std::ofstream outFile(filename, std::ios::app); // відкриваємо файл у режимі дозапису
    if (outFile.is_open()) {
        std::time_t now = std::time(nullptr);              // отримуємо поточний час
        std::tm* localTime = std::localtime(&now);         // конвертуємо в локальний час
        outFile << "\nДата та час дозапису: " << std::asctime(localTime) << std::endl;
        outFile.close();
    } else {
        std::cerr << "Не вдалося відкрити файл для дозапису дати та часу.\n";
    }
}

std::string toBinary(unsigned int b)
{
    if (b == 0) {
        return "0";
    }
    std::string binary = "";
    while (b > 0) {
        binary = (b % 2 == 0 ? "0" : "1") + binary;
        b /= 2;
    }
    return binary;
}
